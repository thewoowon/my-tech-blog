---
title: ë‚˜ ëª°ëëŠ”ë°, GPT ì¢‹ì•„í•˜ë„¤.
description: GPT ë„ˆëŠ” ì–´ë–»ê²Œ ìƒê²¼ë‹ˆ?ì— ëŒ€í•œ ê·¸ì˜ ëŒ€ë‹µì€...
thumbnail: https://imagedelivery.net/6qzLODAqs2g1LZbVYqtuQw/680f71e4-ea4d-4e7d-2af0-b6ec8aa40300/public
prerequisites:
  ['ìš°ì›', 'FE Developer', 'FE Developer', 'ì•ˆë…•í•˜ì„¸ìš”! ìš°ì›ì…ë‹ˆë‹¤.']
stacks: ['PROMPTON']
writer: ìš°ì›
date: '2024-07-18'
name: '20240718_1'
lock: 'false'
---

<div style={{
  display: 'flex',
  justifyContent: 'center',
  alignItems: 'center',
  flexDirection: 'column',
}}>

  <Image
    alt={`Thumbnail`}
    src={
      'https://imagedelivery.net/6qzLODAqs2g1LZbVYqtuQw/ede94a13-df13-445c-342b-4237db437d00/public'
    }
    width={1440}
    height={500}
    priority
  />
</div>

ì•ˆë…•í•˜ì„¸ìš”. ê°œë°œí•˜ëŠ” ìš°ì›ì…ë‹ˆë‹¤.
í‰ì†Œì²˜ëŸ¼ ì—…ë¬´ë¥¼ ë³´ë˜ ì¤‘ì— ë¬¸ë“ GPTëŠ” ë³¸ì¸ ëª¨ìŠµì„ ì–´ë–»ê²Œ ìƒê°í•˜ëŠ”ì§€ ê¶ê¸ˆí•´ì¡ŒìŠµë‹ˆë‹¤.
ë¬¼ì–´ë³¸ ê²°ê³¼ëŠ” ì´ë¯¸ ë³´ì…¨ë‹¤ì‹œí”¼... ì €ëŠ” ì™¸ë©´í•  ìˆ˜ ë°–ì— ì—†ì—ˆì§€ë§Œìš” ğŸ¤£
ì¬ë¯¸ë¡œ ì‹œì‘í•œ ì§ˆë¬¸ì´ì—ˆì§€ë§Œ, GPTì˜ ë‹µë³€ì´ ê½¤ë‚˜ ì¬ë°Œì—ˆê³ ,
í•œí¸ìœ¼ë¡œ ë©€í‹° ëª¨ë‹¬ì´ ë§ˆì¹˜ ì–´ë–¤ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì²˜ëŸ¼ ëŠê»´ì¡ŒìŠµë‹ˆë‹¤.

ì œê°€ ì´ë²ˆ ê¸€ì—ì„œ ë‹¤ë£¨ê³ ì í•˜ëŠ” ë‚´ìš©ì€ "Function Calling"ì…ë‹ˆë‹¤.
Function Calling ì™¸ì—ë„ ì•½ê°„ì˜ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì— ëŒ€í•œ ë‚´ìš©ë„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.
ì¢‹ì€ ê¸°íšŒë¡œ ë°ë³´ì…˜ ì˜¤í”ˆë© ìŠ¤í„°ë””ì— ì°¸ê°€í•˜ê²Œ ë˜ì—ˆê³ ,
ê·¸ ê³¼ì •ì—ì„œ Function Calling í™œìš©í•´ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
ê°œì¸ì ìœ¼ë¡œ ì–•ê²Œë§Œ ì•Œê³  ìˆë˜ ë¶€ë¶„ì´ì—ˆëŠ”ë°,
ì‹¬ì¸µì ìœ¼ë¡œ ê³µë¶€í•˜ë©° ì œ ìì‹ ë„ ëŒì•„ë³´ê³ ,
ë” ë‚˜ì€ ê°œë°œì(?)ê°€ ëœ ê²ƒë§Œ ê°™ì€ ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤!

ì, ì´ì œ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.

### Function Calling

ì´ë¯¸ ë“¤ì–´ë³´ì…¨ì„ì§€ ëª¨ë¥´ê² ì§€ë§Œ, í•¨ìˆ˜ í˜¸ì¶œì€ ê½¤ë‚˜ ìµœê·¼ì— ë‚˜ì˜¨ ê¸°ëŠ¥ì…ë‹ˆë‹¤.
2023ë…„ 6ì›”ì— ë°œí‘œí•œ ì´í›„ë¡œ, ë§ì€ ê°œë°œìë“¤ì´ ì´ ê¸°ëŠ¥ì„ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
ì €ë„ ê¸°ëŠ¥ì´ ë°œí‘œë˜ê³  ë‚˜ì„œ ë¬¸ì„œë¥¼ ì½ì–´ë³´ë©°, ëŒ€ëµ ì´ëŸ° ê¸°ëŠ¥ì´ ìˆêµ¬ë‚˜ ì •ë„ë¡œë§Œ ì•Œê³  ìˆì—ˆìŠµë‹ˆë‹¤.

êµ¬ì²´ì ì¸ ì •ì˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

> GPT API í˜¸ì¶œì—ì„œ í˜¸ì¶œ í•¨ìˆ˜ì— ëŒ€í•œ ì„¤ëª…ì„ ì œê³µí•˜ë©´,
> GPTê°€ í•˜ë‚˜ ì´ìƒì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•œ ì¸ìˆ˜ê°€ í¬í•¨ëœ JSON ê°œì²´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
> Chat Completions APIê°€ ì§ì ‘ì ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì§€ë§Œ,
> ì‚¬ìš©ìì˜ ì½”ë“œì—ì„œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” JSONì„ ìƒì„±í•©ë‹ˆë‹¤.

ê¸°ì¡´ ë²ˆì—­ì´ ì¡°ê¸ˆ ì–´ë ¤ìš´ ë¶€ë¶„ì´ ìˆì–´, ì¡°ê¸ˆ ì‰½ê²Œ í’€ì–´ë³´ì•˜ìŠµë‹ˆë‹¤.
ìš”ì•½í•˜ë©´, GPTê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•œ ì¸ìˆ˜ë¥¼ í¬í•¨í•œ JSONì„ ì¶œë ¥í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì •ë§ ê°„ë‹¨í•˜ì£ ? ì´ì œ ì‹¤ì œë¡œ ì‚¬ìš©í•´ë³´ê¸° ì „ì—
ì—°ì†ì  ì‚¬ê³ ë¥¼ í†µí•´ ì–´ë–»ê²Œ ì‚¬ìš©í• ì§€ ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤.

### Thinking

ì¼ë‹¨ ìš°ë¦¬ëŠ” GPTê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
ê·¸ëŸ°ë° ì›ê²©ì˜ ëª¨ë¸ì´ ì–´ë–»ê²Œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆì„ê¹Œìš”?
ì•„ë§ˆë„ ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì€ "í•¨ìˆ˜ í˜¸ì¶œ"ì´ë¼ëŠ” ìš©ì–´ì— ì§‘ì¤‘í•˜ê³ 
ëª¨ë¸ì˜ ì§ì ‘ì ì¸ í˜¸ì¶œì„ ê·¸ë¦¬ê³  ê³„ì‹¤ì§€ ëª¨ë¦…ë‹ˆë‹¤.

ë¬¼ë¡  ì €ë„ ê·¸ë¬ìŠµë‹ˆë‹¤. "ì•„...ğŸ§ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ ì£¼ê² êµ¬ë‚˜"ë¼ê³  ìƒê°í–ˆì§€ë§Œ,
ì‹¤ì œë¡œëŠ” "ëŒ€ë¦¬ì" í˜¹ì€ "ë§¤ê°œì" ì—­í• ì„ ì‚¬ìš©ìê°€ ë¶€ì—¬ ë°›ì€ ê²ƒê³¼ ë‹¤ë¦„ì—†ìŠµë‹ˆë‹¤.

ë” ì‰¬ìš´ ì˜ˆë¥¼ ë“¤ë©´ virtual classë¥¼ ì˜ˆë¥¼ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¤ìŒ ì½”ë“œë¥¼ ë“¤ì—¬ë‹¤ ë´…ì‹œë‹¤.

```cpp
class Base {
public:
    virtual void display() {
        std::cout << "ì¶œë ¥ì„ ì˜ë„í•˜ê³  ìˆìŠµë‹ˆë‹¤." << std::endl;
    }
};

class Derived : public Base {
public:
    void display() override {
        std::cout << "ë‚˜ëŠ” XXXë¥¼ ì¶œë ¥í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤." << std::endl;
    }
};
```

ìœ„ ì½”ë“œëŠ” Base í´ë˜ìŠ¤ì™€ Derived í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.
Derived í´ë˜ìŠ¤ëŠ” Base í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ display() í•¨ìˆ˜ë¥¼ ì¬ì •ì˜í•˜ê³  ìˆì£ .
Base í´ë˜ìŠ¤ëŠ” ì´ë¯¸ displayë¼ëŠ” í•¨ìˆ˜ë¥¼ 'ì¶œë ¥'ì˜ ì˜ë„ ë‚´ì¬í•œ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.
ê·¸ë ‡ê¸°ì— Derived í´ë˜ìŠ¤ì—ì„œ ì–´ë–¤ ì¶œë ¥ì„ í•˜ê³  ì‹¶ë‹¤ë©´, display() í•¨ìˆ˜ë¥¼ ì¬ì •ì˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

í•¨ìˆ˜ í˜¸ì¶œë„ ì´ì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤.
ì–´ë–¤ í•¨ìˆ˜ê°€ ìˆê³ , ì–´ë–¤ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê³ , ì–´ë–¤ ì¸ìê°€ ë“¤ì–´ê°€ëŠ”ì§€ ì˜ë„ë¥¼ ì •ë¦¬í•´ì„œ
GPTì—ê²Œ ì „ë‹¬í•˜ë©´, GPTëŠ” ê·¸ ì˜ë„ë¥¼ ì´í•´í•˜ê³  ìƒì† ë°›ì•„ ìƒí™©ì— ë§ê²Œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
ì €ëŠ” ì´ëŸ¬í•œ ìƒíƒœë¥¼ "í•¨ìˆ˜ ë™ì¡°í™” ìƒíƒœ(Function Synchronization State)"ë¼ê³  ì •ì˜í•˜ê³  ì•ìœ¼ë¡œ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.
ë˜í•œ í•¨ìˆ˜ ë™ì¡°í™” ìƒíƒœì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ë¥¼ "ì•Œê³  ìˆëŠ” í•¨ìˆ˜"ë¼ê³  ë¶€ë¥´ê² ìŠµë‹ˆë‹¤.

### í•¨ìˆ˜ ë™ì¡°í™” ìƒíƒœ(Function Synchronization State)

í•¨ìˆ˜ ë™ì¡°í™” ìƒíƒœê°€ ë˜ì—ˆë‹¤ë©´ GPTëŠ” í‰ì†Œì™€ ê°™ì´ ì‚¬ìš©ìì˜ ì§ˆë¬¸ì„ ë°›ê¸° ìœ„í•´ ëŒ€ê¸° ìƒíƒœë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.
ê·¸ë¦¬ê³  ì‚¬ìš©ìê°€ ì§ˆë¬¸ì„ í•˜ë©´, GPTëŠ” ì‚¬ìš©ìì˜ ì§ˆë¬¸ì„ ì´í•´í•˜ê³ ,
ì•Œê³  ìˆëŠ” í•¨ìˆ˜ ì¤‘ì—ì„œ ì‚¬ìš©ìì˜ ì˜ë„ì— ë§ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
ì—¬ê¸°ì„œ í˜¸ì¶œì´ë¼ëŠ” ë§ì€ JSONì˜ í˜•íƒœë¡œ ì•Œê³  ìˆëŠ” í•¨ìˆ˜ì˜ ì´ë¦„ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì¢€ ë” ì‰¬ìš´ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

### ëŒ€ë¦¬ì || ë§¤ê°œì

ëŒ€ë¦¬ìë¡œì„œì˜ ì‚¬ìš©ìëŠ” ì´ì œ ì—­ìœ¼ë¡œ GPTì˜ ìš”ì²­ì— ì‘ë‹µí•´ì•¼í•©ë‹ˆë‹¤.
AIMessage íƒ€ì…ìœ¼ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì—ì„œ "function_call" í˜¹ì€ "tool_calls"ì´ë¼ëŠ” í‚¤ì›Œë“œê°€ ìˆë‹¤ë©´
"function_name"ì„ í™•ì¸í•˜ê³  ë°˜ë“œì‹œ FunctionMessage or ToolMessage íƒ€ì…ìœ¼ë¡œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤.
ë¬¼ë¡  "function_call", "tool_calls" í‚¤ì›Œë“œê°€ ì—†ë‹¤ë©´ ì¼ë°˜ì ì¸ ëŒ€í™”ì´ê² ì§€ìš”?

ì¶”ì¶œí•œ function_nameì€ ê³§ë°”ë¡œ keyë¡œ ì‚¬ìš©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
ê·¸ë¦¬ê³  keyì— ëŒ€í•œ valueëŠ” í•´ë‹¹ í•¨ìˆ˜ì˜ ì£¼ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤.

ê°„ë‹¨í•˜ê²Œ ì˜ˆë¥¼ ë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

```python
# í•¨ìˆ˜ ë§¤í•‘ ì •ë³´
function_map_info = {"get_fruit_price": get_fruit_price, "calc_total_price": calc_total_price}

# ë§Œì•½ GPTê°€ "get_fruit_price"ë¥¼ í˜¸ì¶œí•œë‹¤ë©´
function_map_info["get_fruit_price"](...args)
```

ì´ë ‡ê²Œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ë©ë‹ˆë‹¤.
ì¸ìë„ ë†“ì¹˜ì§€ ë§ê³  ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.
ì •ìƒì ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ë‚˜ë©´
ê³§ë°”ë¡œ ê²°ê³¼ë¥¼ string í˜•íƒœë¡œ ë„˜ê²¨ì£¼ë„ë¡ í•©ë‹ˆë‹¤.

### ìµœì¢… ì‘ë‹µ

GPTëŠ” ì‘ë‹µ ê²°ê³¼ë¥¼ ëŒ€ë¦¬ìì—ê²Œ ë°›ê³ ë‚˜ì„œ
ë§ˆì¹˜ ì§ì ‘ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ê²ƒì²˜ëŸ¼ ê²°ê³¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ í™œìš©í•´
ê°€ì¥ ì²˜ìŒ ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ì„ ìƒì„±í•©ë‹ˆë‹¤.
ì´ê²ƒì´ ë°”ë¡œ í•¨ìˆ˜ í˜¸ì¶œì˜ ì „ì²´ì ì¸ íë¦„ì…ë‹ˆë‹¤.

### ê°•ë ¥í•œ ì˜ˆì‹œ

ìœ„ì˜ ì „ì²´ì ì¸ íë¦„ì„ ê´€í†µí•˜ëŠ” ê°€ì¥ ì¢‹ì€ ì˜ˆì‹œë¥¼ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.
ì €ëŠ” í¸ì˜ë¥¼ ìœ„í•´ì„œ langchainì„ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ê² ìŠµë‹ˆë‹¤.
(ì•„ë‡¨... í—¤ì–´ë‚˜ì˜¤ì§€ ëª»í•˜ê² ìŠµë‹ˆë‹¤... ğŸ˜…)

```python
from langchain_openai import ChatOpenAI
from langchain_core.tools import tool
from langchain_core.messages import HumanMessage, ToolMessage, AIMessage
from typing import List
import pandas as pd

@tool
def get_fruit_price() -> str:
    """Get the price of the fruits. column [name, price]

    Args:
        None

    Returns:
        str: The price of the fruits.
    """

    fruits_csv_path = "fruits.csv"
    fruits_df = pd.read_csv(fruits_csv_path)
    return str(fruits_df)

@tool
def calc_total_price(fruits_list: List[str]) -> str:
    """calculate the total price of the fruits.

    Args:
        fruits_list (List[str]): The list of fruits.

    Returns:
        str: The total price of the fruits.
    """

    fruits_csv_path = "fruits.csv"
    fruits_df = pd.read_csv(fruits_csv_path)
    result = 0
    for q in query:
        result += fruits_df[fruits_df["name"] == q]["price"]

    return str(result)


def main():
  # í‚¤ ì„ ì–¸
  API_KEY = 'sk-XXX...'

  # ëª¨ë¸ ì„ ì–¸, ì €ëŠ” gpt-4oë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
  model = ChatOpenAI(
      model="gpt-4o",
      openai_api_key=API_KEY
  )

  # ì»¨í…ìŠ¤íŠ¸ ì„ ì–¸
  context = [HumanMessage(content="ë°”ë‚˜ë‚˜, ì‚¬ê³¼, ë”¸ê¸° ê°ê°ì˜ ê°€ê²©ê³¼ ì´ ê°€ê²©ì„ ì•Œë ¤ì¤˜.")]

  # íˆ´ ì„ ì–¸, GPTê°€ ì‚¬ìš©í•  ê°•ë ¥í•œ ë„êµ¬ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
  tools = [get_fruit_price, calc_total_price]

  # ë„êµ¬ë¥¼ GPTì—ê²Œ ì¥ì–´ì¤ë‹ˆë‹¤.
  model_with_tools = model.bind_tools(tools)

  # ëŒ€í™”ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
  ai_msg = model_with_tools.invoke(context)

  # aiì˜ ì‘ë‹µì„ ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.
  context.append(ai_msg)

  # ê²°ê³¼ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
  print(response)
  """
  content=''
  additional_kwargs={
    'tool_calls': [
      {
        'id': 'call_HU0V8xqccCHDPeDqbHoVYkNv',
        'function': {
          'arguments': '{}',
          'name': 'get_fruit_price'},
          'type': 'function'
      },
      {
        'id': 'call_ISwN3tv9v3zuBB8My6h4Z3F8',
        'function': {
        'arguments': '{
        "fruits_list": ["ë°”ë‚˜ë‚˜", "ì‚¬ê³¼", "ë”¸ê¸°"]
      }',
      'name': 'calc_total_price'
    },
    'type': 'function'
    }]
  }
  """

  tool_calls = ai_msg.additional_kwargs["tool_calls"]

  # ë¬´ì¡°ê±´ tool_calls ì†ì„±ì´ ì˜¨ë‹¤ê³  ê°€ì •í•˜ê³ , ì´ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
  # ë¹ˆ ë”•ì…”ë„ˆë¦¬ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. -> ì´ëŠ” BaseModelì´ ë”•ì…”ë„ˆë¦¬ë¥¼ ìš”êµ¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
  get_fruit_price_result = get_fruit_price({})

  # í•©ì„ ë¯¸ë¦¬ í•˜ë“œì½”ë”©í•©ë‹ˆë‹¤.
  calc_total_price_result = 450

  # ê²°ê³¼ë¥¼ ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.
  messages.append(ToolMessage(content=get_fruit_price_result, tool_call_id=tool_calls[0]["id"]))
  messages.append(ToolMessage(content=calc_total_price_result, tool_call_id=tool_calls[1]["id"]))

  print(messages)

  """
  [
    HumanMessage(content='ë°”ë‚˜ë‚˜, ì‚¬ê³¼, ë”¸ê¸° ê°ê°ì˜ ê°€ê²©ê³¼ ì´ ê°€ê²©ì„ ì•Œë ¤ì¤˜.'), 
    AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_xWkPPBz5DpN02bJojRbycId8', 'function': {'arguments': '{}', 'name': 'get_fruit_price'}, 'type': 'function'}, {'id': 'call_JK66YU69cWbwCP0FRhGMyswQ', 'function': {'arguments': '{"fruits_list": ["ë°”ë‚˜ë‚˜", "ì‚¬ê³¼", "ë”¸ê¸°"]}', 'name': 'calc_total_price'}, 'type': 'function'}]}, response_metadata={'token_usage': {'completion_tokens': 56, 'prompt_tokens': 131, 'total_tokens': 187}, 'model_name': 'gpt-4o-2024-05-13', 'system_fingerprint': 'fp_c4e5b6fa31', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-e52c3275-22c5-46f6-9556-d4551239553c-0', tool_calls=[{'name': 'get_fruit_price', 'args': {}, 'id': 'call_xWkPPBz5DpN02bJojRbycId8'}, {'name': 'calc_total_price', 'args': {'fruits_list': ['ë°”ë‚˜ë‚˜', 'ì‚¬ê³¼', 'ë”¸ê¸°']}, 'id': 'call_JK66YU69cWbwCP0FRhGMyswQ'}], usage_metadata={'input_tokens': 131, 'output_tokens': 56, 'total_tokens': 187}), 
    ToolMessage(content='  name  price\n0   ì‚¬ê³¼    100\n1  ë°”ë‚˜ë‚˜    150\n2   ë”¸ê¸°    200', tool_call_id='call_xWkPPBz5DpN02bJojRbycId8'), 
    ToolMessage(content='450', tool_call_id='call_JK66YU69cWbwCP0FRhGMyswQ')
  ]
  """
  response = model_with_tools.invoke(messages)

  print(response)

  """
  content='### ê³¼ì¼ ê°€ê²©\n- **ë°”ë‚˜ë‚˜**: 150ì›\n- **ì‚¬ê³¼**: 100ì›\n- **ë”¸ê¸°**: 200ì›\n\n### ì´ ê°€ê²©\nì´ ê°€ê²©ì€ 450ì›ì…ë‹ˆë‹¤.' 
  response_metadata={'token_usage': {'completion_tokens': 51, 'prompt_tokens': 249, 'total_tokens': 300}, 'model_name': 'gpt-4o-2024-05-13', 'system_fingerprint': 'fp_c4e5b6fa31', 'finish_reason': 'stop', 'logprobs': None} 
  id='run-155443eb-3ff3-4bf9-815c-7094114e5e9d-0' 
  usage_metadata={'input_tokens': 249, 'output_tokens': 51, 'total_tokens': 300}
  """

if __name__ == "__main__":
    main()
```
